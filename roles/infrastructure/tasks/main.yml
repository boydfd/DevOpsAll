---



- include_tasks: helm_unit.yml
  vars:
    unit_name: nfs-slow
    unit_repo: stable/nfs-client-provisioner
    namespace: default

- include_tasks: helm_unit.yml
  vars:
    unit_name: nfs-fast
    unit_repo: stable/nfs-client-provisioner
    namespace: default

- include_tasks: helm_unit.yml
  vars:
    unit_name: nginx
    unit_repo: stable/nginx-ingress

- include_tasks: helm_unit.yml
  vars:
    unit_name: jenkins
    unit_repo: stable/jenkins
    resources:
      - name: gradle-wrapper
        type: pvc
      - type: secret
        data: "{{ jenkins_data }}"
        name: docker-secret

- include_tasks: helm_unit.yml
  vars:
    unit_name: nexus
    unit_repo: stable/sonatype-nexus

- name: create dns resources
  include_tasks: resource.yml
  vars:
    name: dns
    resource: configmap
    hosts:
      - '{{ docker_ip }} {{ docker_host }}'
      - '{{ nexus_ip }} {{ nexus_host }}'
      - '{{ jenkins_ip }} {{ jenkins_host }}'

- include_tasks: gitlab.yml
  vars:
    unit_name: gitlab

